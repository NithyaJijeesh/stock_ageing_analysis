{% extends 'base.html' %}
{% block body %}
{% load static %}

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.3/font/bootstrap-icons.css">
    <style>


      thead th {
                border: .5px solid rgba(255, 255, 255, .2);
                 
                }

      .table-row{
                    cursor:pointer;
                    
                }
      .table-row:hover{
                    background-color: rgb(216, 155, 51);
                }
      tr{

              background-color: rgba(33,57,77); 
              color:#fff;
              border: 0px none;

        }
       a{
        text-decoration: none;
        color:#fff;
       }
       a:hover{
        color: none;
        background-color: rgb(216, 155, 51);
       }
     .btn{
                    background-color: rgb(41, 51, 51);
                    border: 1px,solid,cornflowerblue;
                    width: 292px;
                    margin-left: 12px;
      }
    
      
      </style>
      <body>
          <div class="container-fluid" >
              <div class="main-panel">
                  <div class="content-wrapper">
                      <div class="row d-flex" style="background-color: rgb(103, 175, 220);color:#fff;width: 100%;margin: auto;">
                          <div class="col">Stock Ageing Analysis</div>
                          <div class="col-4" style="font-weight:600 ;text-transform:capitalize;">{{company.name}}</div>
                    
                          <div class= 'col-2'><a href="javascript:history.go(-1);">
                              <span class="pull-right clickable" data-effect="fadeOut"><i class="fa fa-times" style="color: black;"></i></span></a>
                          </div>                      
                      </div>
                      
                      <div class="table-responsive">
                          <table class="table table-bordered table-sm border-dark" style="background-color: rgba(33,57,77,255);color:#fff;">
                            <tr  class="p-2">
                              <th colspan="10" style="border-bottom: solid 0.5px rgba(255, 255, 255, .2) ; border-right:none ;">
                                <div>
                                <div >Items Under : {{group.name}}</div>
                                  <div>All Batches(Aged By Date of Purchase)</div>
                                </div>
                                
                                 </th>
                              <th colspan="10" class="text-right" style="border-bottom: solid 0.5px rgba(255, 255, 255, .2);border-left:none ;">                           
                                
                                <div >as at 1-April-2022</div>
                                <div >Valued based on actual purchase</div>
                          </th>
                          </tr>
                        {{d[0]}}
                          <tr class="p-2 text-center mt-5" >
                            <th colspan="8" class="text-center" rowspan="2">Particulars</th>
                            <th colspan="2"class="text-center" rowspan="2">Expiry date</th>
                              <th >Total</th>
                              <th colspan="2" > ( <45 days ) </th>
                              <th colspan="2" >45 to 90 days</th>
                              <th colspan="2" >90 to 180 days</th>
                              <th colspan="2" >( >180 days )</th>
                              <th>Negative Stock</th>

                          </tr>

                          <tr class="p-2 text-center" style="border-top:solid 0.5px rgba(255, 255, 255, .2) ;">
                              <th >Quantity</th>
                              <th >Qauntity </th>
                              <th >Value </th>
                              <th>Qauntity </th>
                              <th>Value </th>
                              <th>Qauntity </th>
                              <th>Value </th>
                              <th>Qauntity </th>
                              <th>Value </th>
                              <th>Qauntity </th>

                          </tr>
                             
                              <tbody class="border-dark">
                                {% for i in item %}
                                  <tr>
                                    <td colspan="8"><a href="{% url 'stock_monthly' i.id %}" >{{i.name}}</a></td>
                                    <td colspan="2" class="text-center">{{i.expirydate}}</td>
                                    
                                    <td><a href="{% url 'stock_monthly' i.id %}">{{i.quantity}} {{i.units}}</a></td>

                                    {% for j in dd %}
                                    {% if d[j] < 45%}
                                    <td><a href="{% url 'item_inwards'%}">{{i.quantity}} {{i.units}}</a></td>
                                    <td><a href="{% url 'item_inwards'%}">{{i.value}}</a></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    
                                    {% elif d[j] >= 45 | d[j] < 90 %}
                                    <td></td>
                                    <td></td>
                                    <td><a href="{% url 'item_inwards'%}">{{i.quantity}} {{i.units}}</a></td>
                                    <td><a href="{% url 'item_inwards'%}">{{i.value}}</a></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    {% elif d[j] >= 90 | d[j] < 180 %}
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td><a href="{% url 'item_inwards'%}">{{i.quantity}} {{i.units}}</a></td>
                                    <td><a href="{% url 'item_inwards'%}">{{i.value}}</a></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    {% elif d[j] >= 180 %}
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td></td>
                                    <td><a href="{% url 'item_inwards'%}">{{i.quantity}} {{i.units}}</a></td>
                                    <td><a href="{% url 'item_inwards'%}">{{i.value}}</a></td>
                                    <td></td>
                                    {% endif%}
                                    {% endfor %}
                                  </tr>
                                {% endfor %}
                              </tbody>
                              <tfoot style="border-top:solid 0.5px rgba(255, 255, 255, .2) ;">
                                <tr>
                                    <td  colspan="10" class="text-center">Grand Total</td>
                                    
      
                                </tr>
                              </tfoot>
                          </table>
                        </div>
                  </div>
              </div>
          </div>
{% endblock %}